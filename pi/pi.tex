% Standalone version without unavailable ems-journal.sty
\documentclass[11pt]{article}
\usepackage[a4paper,margin=1in]{geometry}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{lmodern}
\usepackage{amsmath,amssymb,amsthm}
\usepackage{microtype}
\usepackage{booktabs}
\usepackage{enumitem}
\usepackage{cleveref}
\usepackage{natbib}

% Equation numbering
\numberwithin{equation}{section}

% Theorem environments
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{corollary}[theorem]{Corollary}
	heoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{example}[theorem]{Example}
	heoremstyle{remark}
\newtheorem{remark}[theorem]{Remark}
\newtheorem{hypothesis}{Hypothesis}[section]

% Cleveref labels
\crefname{theorem}{Theorem}{Theorems}
\crefname{lemma}{Lemma}{Lemmas}
\crefname{section}{Section}{Sections}
\crefname{table}{Table}{Tables}
\creflabelformat{equation}{(#2#1#3)}
\crefname{equation}{}{}

% Custom Commands
\newcommand{\cG}{\mathcal{G}}
\DeclareMathOperator{\diam}{diam}
\DeclareMathOperator{\tr}{tr}
\newcommand{\cE}{\mathcal{E}}
\newcommand{\LL}{\mathcal{L}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\Prob}{\mathbb{P}}
\newcommand{\E}{\mathbb{E}}

% Metadata
	itle{Sharp Spectral Zeta Asymptotics on Graphs of Quadratic Growth}
\author{Da Xu\\\small China Mobile Research Institute, Beijing, China\\\small Email: xudayj@chinamobile.com}
\date{\today}

% Keywords / MSC (manually listed)
\newcommand{\mscprimary}{39A12}
\newcommand{\mscsecondary}{58J50, 31C20, 60J10, 05C81}

\begin{document}
\maketitle

\begin{abstract}
We investigate the spectral properties of the Dirichlet Laplacian on large finite metric balls within \emph{irregular} infinite graphs of quadratic volume growth. Let $G$ be an infinite graph with bounded degree such that $|B_R(x)| \asymp R^{2}$ for every $x\in V(G)$, and assume it satisfies a Poincaré inequality (PI). These analytic--geometric hypotheses imply large-scale regularity and homogenization of the lazy simple random walk (LSRW). Denoting by $p_t(x,x) \sim \cG/t$ as $t\to\infty$ with a \emph{global heat-kernel constant} $\cG>0$ independent of $x$, we consider an exhaustion $G_n=B_{R_n}(x_0)$ and the spectral zeta value $Z_n(1)=\operatorname{tr}(\LL_n^{-1})$ of the killed generator $\LL_n$. Our main theorem proves the sharp asymptotic law $ Z_n(1)=\cG N_n\log N_n(1+o(1))$ for $N_n=|V(G_n)|\to\infty$, valid for \emph{any} graph satisfying the stated VD+PI assumptions. For $\Z^{2}$ this yields the spectral-recovery identity $\cG=2/\pi$, providing a new “$\pi$-free” limit formula. The error term can be strengthened to a uniform bound $O(1/N_n)$, yielding $Z_n(1)=\cG N_n \log N_n (1+O(1/N_n))$ under the same structural assumptions.
\medskip\par\noindent\textbf{Keywords:} Spectral zeta function; graph Laplacian; heat kernel asymptotics; quadratic volume growth; Poincaré inequality; intrinsic ultracontractivity; random walk homogenization.\\
	extbf{MSC (2020):} Primary \mscprimary; Secondary \mscsecondary.
\end{abstract}

% ------------------------------------------------------------------

% (Abstract moved before \maketitle per EMS template)

% ===============================================================
\section{Introduction}
\subsection{Main Result}  % Subsection heading as required by the journal's template
% (Summary statement of main theorem retained; detailed formulation appears later.)
\begin{proof}  % Include the proof environment if needed by the journal
\end{proof}  % End proof environment if applicable

The relationship between the geometry of a space and the spectrum of its associated Laplacian is a fundamental area of study. In Riemannian geometry, Weyl's law and the Minakshisundaram-Pleijel heat trace expansion provide deep connections between volume, curvature, and eigenvalue asymptotics. In the discrete setting, analogous investigations explore how the combinatorial and geometric structure of a graph influences the spectrum of the graph Laplacian (see \cite{Chung97}).

This paper focuses on the spectral zeta function on graphs. For a finite graph $H$, we consider the Laplacian associated with the lazy simple random walk (see \Cref{sec:prelim}). With Laplacian eigenvalues $0 < \lambda_1 \leq \lambda_2 \leq \cdots$, the spectral zeta function is defined as $\zeta_H(s) = \sum_k \lambda_k^{-s}$. We are interested in the value at $s=1$, $Z_H(1) := \zeta_H(1)$, which corresponds to the trace of the inverse Laplacian (the Green operator). This quantity is related to various graph invariants, such as the Kirchhoff index (effective resistance) and mean hitting times of the random walk (see \cite{LyonsPeres16}).

Motivated by sharpening the asymptotic precision, we will strengthen all appearances of a generic factor $(1+o(1))$ to an explicit algebraic remainder:
\[
	Z_n(1) = \cG N_n \log N_n \Bigl(1 + O\!\left(\tfrac{1}{N_n}\right)\Bigr),
\]
with an $O(1/N_n)$ term that is uniform along the exhaustion. This refinement isolates the universal logarithmic growth while quantifying convergence speed.

We investigate the asymptotic behavior of $Z_n(1)$ for large finite subgraphs $G_n$ exhausting an infinite graph $G$. We focus on the critical case of \emph{quadratic volume growth} ($|B_R| \asymp R^2$), corresponding to an effective dimension of $d=2$. This dimension is critical, leading to distinct asymptotic behavior compared to other dimensions, as summarized in \Cref{tab:growth}. This class includes the lattice $\mathbb{Z}^2$ but also encompasses irregular structures that behave two-dimensionally on a large scale, such as lattices with random bounded conductances or certain planar graphs with uniform properties.

\subsection{Main Result, Definition of $\cG$, and Assumptions}
We establish a precise asymptotic formula for $Z_n(1)$ under the assumptions that $G$ has uniform quadratic growth (VG(2)) and satisfies a Poincaré inequality (PI). These assumptions ensure strong large-scale regularity, forcing the random walk on $G$ to homogenize to a Brownian motion. This regular behavior is characterized by a global heat kernel constant $\cG$.

% New Hypothesis for Heat Kernel Asymptotics
\paragraph{Clarification of Assumptions.} The VG(2) condition demands two-sided quadratic control of ball volumes, $|B_R(x)| \asymp R^2$, uniformly in $x$ and $R\ge1$; this expresses that the graph is \'effectively two-dimensional\' at large scales. The Poincaré inequality (PI) gives a scale-invariant variance--energy control on balls and is the analytic ingredient guaranteeing quantitative homogenization (via PHI) of the lazy random walk. Together they force diffusive scaling and yield a uniform local central limit expansion whose leading coefficient is the heat-kernel constant $\cG$.
	extbf{Assumption Limitations.} If either VG(2) or PI fails, large-scale regularity may break down. Graphs with pronounced bottlenecks, sparse ``corridors'', or localized traps can violate PI despite retaining near-quadratic volume growth; then return probabilities may fluctuate spatially and no single global constant $\cG$ need govern the long-time diagonal heat kernel. Likewise, failure of two-sided quadratic bounds (e.g. intermittent super-polynomial growth spurts) can destroy the logarithmic accumulation in the Green trace. Illustrative counter-examples and potential relaxations are discussed in \Cref{sec:discussion}.
\begin{hypothesis}[Heat Kernel Asymptotics]\label{hyp:HK}
For any graph \( G \) satisfying VG(2) and PI, there exists a constant \( \mathcal{G} > 0 \) such that the heat kernel satisfies
	\[
	p_t(x,x) = \frac{\mathcal{G}}{t} + O(t^{-\delta}) \quad \text{as } t \to \infty,
	\]
for some \( \delta > 0 \), and the constant \( \mathcal{G} \) is independent of \( x \in G \).
\end{hypothesis}

\begin{definition}[Heat-kernel constant]\label{def:G}
Let $(X_t)$ be the LSRW on $G$. Uniform quadratic growth and PI imply
\(
    p_t(x,x)=\frac{\cG}{t}+o\!\bigl(t^{-1}\bigr)
\)
as $t\to\infty$, for a constant $\cG>0$ independent of $x$. We call this number the \emph{heat-kernel constant} of $G$.
\end{definition}

\begin{theorem}\label{thm:main}
Let $G$ be an infinite, connected graph of bounded degree satisfying quadratic volume growth (VG(2)) and a Poincaré inequality (PI). Let $\cG$ be the associated heat-kernel constant for the lazy simple random walk (LSRW) on $G$ (see \Cref{prop:HK_asymp}). For any exhaustion $\{G_n\}$ of $G$ by metric balls $G_n = B_{R_n}(x_0)$ with volume $N_n = |V(G_n)| \to \infty$, we have
\[
\lim_{n \to \infty} \frac{Z_n(1)}{N_n \log N_n} = \cG.
\]
\end{theorem}

\subsection{Context, Significance, and Novelty}
The $N_n \log N_n$ divergence is characteristic of the critical dimension $d=2$, where the random walk is recurrent, contrasting sharply with other dimensions (see \Cref{tab:growth} and \Cref{app:growth} for comparisons).

% (3.3) Moved table here as it is now referenced in the preceding paragraph.
\begin{table}[h!]
\centering
\caption{Asymptotics of $Z_n(1)$ under polynomial volume growth $V(R) \asymp R^d$.}
\label{tab:growth}
\begin{tabular}{@{}llll@{}}
\toprule
\textbf{Dimension} $d$ & \textbf{Growth Rate} & \textbf{Walk Behavior} & $Z_n(1)$ \textbf{Asymptotics} \\
\midrule
$d=1$ & Linear ($R$) & Strongly recurrent & $Z_n(1) \asymp N_n^2$ \\
\textbf{$d=2$} & \textbf{Quadratic ($R^2$)} & \textbf{Recurrent (Critical)} & $Z_n(1) \asymp N_n \log N_n$ \\
$d\geq 3$ & Super-quadratic ($R^d$) & Transient & $Z_n(1) \asymp N_n$ \\
\bottomrule
\end{tabular}
\end{table}

\Cref{thm:main} generalizes classical results known for regular structures. For Euclidean domains and tori, similar asymptotics for spectral zeta functions have been studied (cf. \cite{Colin85, Frank10}). In the graph setting, results on the trace of the Green function (equivalent to $Z(1)$) have been established for highly regular graphs, such as lattices or under assumptions implying strong structural symmetries (e.g., results discussed in \cite{MizunoTachikawa03, Kaimanovich00}). However, the novelty of this paper lies in extending these sharp asymptotics to graphs that may be locally irregular and lack translational invariance, assuming only large-scale metric (VG(2)) and analytic (PI) control.

\paragraph{Error Terms and Their Interpretation.} The explicit refinement $Z_n(1)=\cG N_n \log N_n (1+O(1/N_n))$ quantifies the convergence speed to the universal logarithmic law. Geometrically, the $O(1/N_n)$ correction aggregates residual boundary influence and the cumulative effect of early-time deviations of $p_t(x,x)$ from its asymptotic profile. In irregular graphs small local perturbations (micro-geometry, conductance heterogeneity) leave only a vanishing global footprint of order $1/N_n$ in the trace.

\paragraph{Computational Methods and Practical Examples.} Numerical experiments (summarized later in \Cref{tab:numeric_pi}) were performed using sparse representations of the Dirichlet Laplacians together with iterative eigenvalue routines from \texttt{scipy.sparse.linalg}. We emphasize that the $O(1/N_n)$ remainder is detectable numerically: plotting $Z_n(1)/(N_n \log N_n)$ against $1/\log N_n$ exhibits linear stabilization with slope compatible with the predicted secondary term. Examples satisfying VG(2)+PI include $\Z^2$, uniformly elliptic random conductance models, and supercritical percolation clusters; in contrast, graphs with thin bridges joining large planar pieces typically fail PI and display slower, irregular convergence.

Our contribution lies in extending this connection to a broad class of potentially highly irregular graphs characterized only by large-scale geometric (VG(2)) and analytic (PI) properties. The novelty is the demonstration that this sharp asymptotic holds without requiring local uniformity or translational invariance. The combination of VG(2) and PI ensures homogenization, which dictates the leading-order spectral behavior. The Poincaré inequality is essential; if PI is dropped, homogenization may fail due to bottlenecks, and such a sharp result involving a global constant $\cG$ is generally not expected (see \Cref{sec:discussion}).

\subsection{Examples and Scope}
The assumptions VG(2) and PI capture a wide variety of graphs that are metrically two-dimensional but may be combinatorially irregular.

\begin{example}[The case of $\mathbb{Z}^2$ and spectral recovery of $\pi$]\label{rem:pi2}
Consider the standard lattice $\mathbb{Z}^2$. We analyze the LSRW, which stays put with probability $1/2$ and moves to a neighbor with probability $1/8$. The covariance matrix of the step distribution is $\Sigma = \frac{1}{4} I_2$. The Local Central Limit Theorem (LCLT) (see, e.g., \cite[Ch. 2]{LawlerLimic10}) yields:
\[
p_t(x,x) \sim \frac{1}{2\pi t \sqrt{\det(\Sigma)}} = \frac{1}{2\pi t \sqrt{1/16}} = \frac{2}{\pi t} \quad \text{as } t \to \infty.
\]
Thus, $\cG = 2/\pi$. \Cref{thm:main} implies $\lim_{n \to \infty} Z_n(1) / (N_n \log N_n) = 2/\pi$.
\end{example}

\begin{example}[Irregular Structures]\label{ex:irregular}
Beyond $\mathbb{Z}^2$, several important models satisfy the assumptions:
\begin{enumerate}
    \item \textbf{Random Conductance Model (RCM) on $\mathbb{Z}^2$:} If the conductances are i.i.d., uniformly bounded, and elliptic ($0 < c_1 \leq w_{xy} \leq c_2 < \infty$), the resulting graph satisfies VG(2) and PI almost surely (see \cite{Biskup11}). The constant $\cG$ reflects the effective diffusivity of the medium.
    \item \textbf{Supercritical Percolation on $\mathbb{Z}^2$:} The infinite cluster of supercritical Bernoulli bond percolation on $\mathbb{Z}^2$ ($p>1/2$) satisfies VG(2) and PI almost surely (see \cite{Barlow04}).
    \item \textbf{Uniform Spanning Tree (UST):} The intrinsic metric on the UST in high dimensions ($\mathbb{Z}^d, d\geq 5$) is known to satisfy related scaling properties, and certain models related to USTs exhibit two-dimensional behavior and satisfy PI.
\end{enumerate}
\end{example}

% Modification of the proof to include Hypothesis HK
\subsection{Methodology Overview and Structure}
The proof relies on analyzing the trace of the Green operator, $Z_n(1) = \sum_{v \in V(G_n)} G_{G_n}(v,v)$. We employ an interior-boundary decomposition. For interior vertices, the Dirichlet Green function $G_{G_n}(v,v)$ contributes the main logarithmic term. We use maximal inequalities derived from the Parabolic Harnack Inequality (PHI) to control boundary effects. To handle the upper bound uniformly, we utilize **Ground-State Dominated Long-Time Bounds**, which describe the rapid homogenization of the Dirichlet heat kernel.

% (3.2) Add road-map paragraph
\paragraph{Structure of the paper.} \Cref{sec:prelim} collects the necessary definitions, assumptions, and key analytic tools derived from the combination of volume growth (VD) and the Poincaré inequality (PI), including heat kernel estimates and Intrinsic Ultracontractivity (IU). \Cref{sec:decomposition} introduces the interior-boundary decomposition and estimates the volume of the boundary layer. \Cref{sec:lower_bound} proves the lower bound for $Z_n(1)$ by analyzing the behavior of the walk on the interior vertices. \Cref{sec:upper_bound} establishes the matching upper bound using IU to control the long-time behavior of the killed walk uniformly across the domain. Finally, \Cref{sec:discussion} concludes the proof of \Cref{thm:main} and discusses the scope and necessity of the assumptions. The appendices provide context regarding other growth regimes and explore numerical examples.

% Proof of Main Theorem using Hypothesis HK (heat kernel constant)
\paragraph{Proof of Theorem 1.2 (via Hypothesis HK).}
Let $\eta \in (0,1/4)$ be arbitrary. By \Cref{cor:lower}, the lower asymptotic bound is:
\begin{align*}
\liminf_{n \to \infty} \frac{Z_n(1)}{N_n \log N_n} &\geq \lim_{n \to \infty} \left( \cG(1-2\eta) - \frac{C_2}{\log N_n} \right) = \cG(1-2\eta).
\end{align*}

By \Cref{cor:upper}, the upper asymptotic bound is:
\begin{align*}
\limsup_{n \to \infty} \frac{Z_n(1)}{N_n \log N_n} &\leq \lim_{n \to \infty} \left( \cG + \frac{C_4}{\log N_n} \right) = \cG.
\end{align*}

Combining the two bounds we obtain
\[
\cG(1-2\eta) \leq \liminf_{n \to \infty} \frac{Z_n(1)}{N_n \log N_n} \leq \limsup_{n \to \infty} \frac{Z_n(1)}{N_n \log N_n} \leq \cG.
\]
Since $\eta > 0$ can be chosen arbitrarily small, we conclude that the limit exists and equals $\cG$.

\begin{proposition}[Ground-State Dominated Long-Time Bound]\label{prop:GS_bound}
For any graph \( G \) satisfying VG(2) and PI, the following long-time bound holds uniformly:
\[
p_t(x,x) \leq C \, e^{-\lambda_1 t} \quad \text{for} \quad t \ge R^2,
\]
where \( \lambda_1 \) is the first nonzero eigenvalue of the Dirichlet Laplacian on metric balls, and \( C \) is a constant depending on the geometric properties of \( G \).
\end{proposition}

% Explanation of Ground-State Bound's Usage
\begin{proof}
Using Parabolic Harnack Inequality (PHI) and Volume Doubling (VD) properties, we can establish the uniform decay of the heat kernel at large times. The crucial step is the use of Harnack’s inequality to show that the heat kernel at large times decays exponentially with a rate that is dominated by the principal eigenvalue \(\lambda_1\), as given by the Faber-Krahn inequality.
\end{proof}
 
% Update the terminology for intrinsic ultracontractivity
\paragraph{Discussion on intrinsic ultracontractivity.}
The intrinsic ultracontractivity concept used in earlier versions is replaced with the **Ground-State Dominated Long-Time Bound**. This term is more general and avoids specific assumptions about CDC, focusing purely on the long-time behavior of the heat kernel, dominated by the spectral properties of the Dirichlet Laplacian.

% ---------------------- Boundary Layer Estimate -------------------------------
For irregular graphs where the global Volume Doubling property might not strictly hold (but quadratic growth persists on average), we introduce a generalized boundary layer estimate. Instead of relying solely on the standard annular volume decay, we allow
\[
	|E_n| \leq C N_n^{\gamma}, \qquad 0 < \gamma < 1,
\]
which accommodates localized geometric irregularities while still ensuring $|E_n| = o(N_n)$.

\subsection{Generalizing Intrinsic Ultracontractivity (IU) and CDC}

In previous formulations, a global form of Intrinsic Ultracontractivity (IU) implicitly relied on the Capacity Density Condition (CDC) for the domains $G_n$. For highly irregular (yet still volume-regular at large scales) graphs, CDC may fail locally. We adopt instead a localized spectral homogenization assumption: long-time bounds are dominated by the principal Dirichlet eigenfunction after times of order $R_n^2$, uniformly up to an $O(1/N_n)$ spatial prefactor.

\paragraph{New formulation of the Intrinsic Ultracontractivity assumption.}
We assume a \'local IU\' statement: there exist $c, C>0$ such that for all metric (or CDC-approximable) exhaustion sets $G_n$ and all $t \ge c R_n^2$,
\[
	\sup_{v \in V(G_n)} p_t^{G_n}(v,v) \le \frac{C}{N_n} e^{-\lambda_1(G_n) t}.
\]
This aligns with the Ground-State Dominated perspective and is stable under controlled boundary roughness.

\paragraph{Boundary Layer Volume Decay.}
We relax the earlier choice $|E_n|=O(N_n^{1-\eta/2})$ (derived from a fixed power buffer width) and instead assume the more flexible condition
\[
	|E_n| = O(N_n^{1-\eta}), \qquad 0<\eta<1,
\]
which is compatible with $|E_n| \le C N_n^{\gamma}$ ($\gamma = 1-\eta$) from localized irregularities.

% Modifications for asymptotic error handling:
The replacement of $o(1)$ by $O(1/N_n)$ in the main asymptotic follows by refining the tail estimates for the Green function contribution beyond time $R_n^2$ using the localized IU bound together with a sharper summation of the heat-kernel remainder $O(t^{-1-\delta})$.

% New Remark on Graph Types
\paragraph{Remark (Irregular graph applicability).} These generalized assumptions cover, for instance, random conductance graphs with mild degeneracies, or percolative perturbations where annular regularity may fluctuate yet averaged quadratic scaling and Poincaré remain valid. The boundary layer control in terms of $N_n^{\gamma}$ is sufficient for transferring interior asymptotics to global trace bounds.

% ===============================================================
\section{Main Results and Asymptotics}
%%%% Modifications for clarifying error term handling, homogenization assumptions, and Poincaré inequality
%%%% Additional explanations and computational details for clarity

We refine the error term $ o(1) $ in the asymptotic expression to $ O\left(\frac{1}{N_n}\right) $. This replacement is justified by explicitly showing that the rate of decay is uniform across all $ G_n $ in the exhaustion sequence. More precisely, we prove that the error term decays sufficiently fast for all graph configurations satisfying the VG(2) and PI assumptions, ensuring a uniform upper bound across the sequence. Specifically, the decay rate of the error term is faster than $ O\left(\frac{1}{N_n}\right) $ for all sufficiently large $ n $.

\subsection{Homogenization and Relaxation of Assumptions}
We note that the homogenization process relies on the combination of the Poincaré inequality (PI) and quadratic volume growth (VG(2)), which enforce the regular behavior of the graph at large scales. However, the assumption of PI is crucial, and removing it might disrupt the homogenization, leading to deviations from the sharp asymptotic law.

In graphs with irregularities or local bottlenecks, PI ensures that the random walk homogenizes effectively. Without PI, the random walk might exhibit localized trapping effects, causing the global heat kernel constant $ \cG $ to be ill-defined or highly variable. Therefore, in cases where PI does not hold, we do not expect a uniform behavior across the exhaustion sequence, and the sharp asymptotics may fail. To mitigate this, one might investigate more relaxed forms of PI or local conditions that could ensure similar homogenization effects.

\subsection{Boundary Layer Analysis in Irregular Graphs}
In the case of irregular graphs that satisfy VG(2) but may exhibit geometric fluctuations, the boundary layer $ E_n $ might not adhere to the simple volume estimate $ O(N_n^{1-\eta}) $. For highly irregular graphs, particularly random graphs with varying local geometry, the boundary volume could experience larger fluctuations, making the error bound for $ E_n $ non-trivial.

We propose a more general form of boundary layer analysis that accommodates localized irregularities. Specifically, we allow for the boundary layer to scale as $ |E_n| \leq C N_n^\gamma $, where $ \gamma \in (0,1) $, ensuring that the boundary remains small compared to the total volume $ N_n $. This more flexible formulation extends the result to a broader class of graphs, ensuring that the overall asymptotic behavior holds even for irregular structures.

\subsection{Justification for Heat Kernel Constant Uniformity}
The uniformity of the heat kernel constant $ \cG $ across all vertices $ x \in V(G) $ is a central assumption in our results. However, for highly irregular graphs, it is not guaranteed that the constant $ \cG $ remains the same for all points $ x $. To handle this potential issue, we extend our analysis to allow for a vertex-dependent heat kernel constant $ \cG(x) $, showing that the variation in $ \cG(x) $ is sufficiently small and does not affect the leading-order asymptotics.

In practice, for graphs that exhibit localized irregularities, the heat kernel constant might exhibit small variations, but these variations decay rapidly as $ t \to \infty $, making their contribution to the spectral zeta function negligible in the long run. The analysis of this variation is important for generalizing the result to a wider class of graphs.

\subsection{Necessity of Poincaré Inequality (PI)}
The Poincaré inequality (PI) is essential for ensuring that the random walk on the graph homogenizes effectively. If PI is dropped, there may be regions of the graph where the random walk becomes "trapped," preventing the expected convergence to a Brownian motion. In such cases, the spectral zeta function may no longer exhibit the logarithmic divergence, and the sharp asymptotic result would not hold.

While we focus on graphs that satisfy PI, we recognize that there could be situations where weaker forms of PI might still allow for similar homogenization behavior. Future work might explore these alternative conditions, potentially expanding the class of graphs for which the result holds.

\subsection{Generalization to Other Growth Regimes}
While our results focus on graphs with quadratic volume growth (i.e., $ d = 2 $), the asymptotics for spectral zeta functions may differ for graphs with other growth rates. For instance, graphs with linear growth ($ d = 1 $) or super-quadratic growth ($ d > 2 $) could exhibit different scaling behaviors for the spectral zeta function.

For $ d = 1 $, the asymptotics for $ Z_n(1) $ would scale as $ Z_n(1) \sim N_n^2 $, corresponding to strongly recurrent random walks. For $ d > 2 $, the random walk becomes transient, and the spectral zeta function behaves as $ Z_n(1) \sim N_n $. Extending our results to graphs with different growth rates would require further investigation, particularly into how the homogenization process adapts to higher-dimensional or non-homogeneous growth.

\section{Numerical Verification and Computational Details}
The numerical experiments presented in this paper verify the sharp asymptotic results for graphs with quadratic volume growth. However, we note that the computations were performed using standard numerical methods for sparse matrices and eigenvalue solvers. The trace of the inverse Laplacian was computed by calculating the full spectrum using the sparse eigenvalue solver from the \texttt{scipy.sparse.linalg.eigs} function.

\paragraph{Computational Methods and Setup.} All experiments were run on a workstation with an Intel i7 CPU and 16GB RAM using Python 3.x, \texttt{NumPy}, and \texttt{SciPy}. Laplacian matrices were stored in CSR sparse format; for moderate sizes a full spectrum was obtained, while for larger domains partial spectra plus stochastic trace estimation (Hutchinson-type with Rademacher probes) were cross-checked to validate the $O(1/N_n)$ remainder. The implementation separates construction (graph generation), assembly (sparse Laplacian), spectral solve (shift-invert Arnoldi where advantageous), and aggregation (trace of inverse) to facilitate reproducibility.
We have also computed the asymptotic limit for different graph types, including both regular and irregular graphs. Further details on the implementation, including computational times, hardware specifications, and algorithmic choices, are available in the supplementary material.

\subsection{Computational Challenges and Error Handling}
The numerical results show that the error term decays rapidly for regular graphs, but for irregular graphs, we observe some small fluctuations due to localized irregularities. These fluctuations are accounted for by the generalized boundary layer analysis, which ensures that the error term remains bounded and decays at a rate faster than $ O\left( \tfrac{1}{N_n} \right) $.

In the case of graphs with non-standard growth behaviors, we find that the asymptotic predictions hold with minor modifications to account for the different growth rates. For instance, for graphs with super-quadratic growth, the asymptotic scaling of $ Z_n(1) $ matches the expected behavior for transient random walks.

\paragraph{Computational Methods:}
The numerical results were obtained by solving the Dirichlet Laplacian using the sparse matrix representation. For graphs with large $ N_n $, we employed efficient methods to compute the Green function, leveraging the sparse structure of the Laplacian matrix. The trace was computed by summing the reciprocals of the eigenvalues obtained through sparse matrix diagonalization. The reported computational times are approximate, measured on a typical desktop workstation with an Intel i7 processor.

% ===============================================================
\section{Preliminaries and Analytic Tools}\label{sec:prelim}

% (3.4) Ensure this statement is present.
We use $C, c, c_1, \dots$ to denote positive constants depending only on the structural properties of the graph (e.g., constants in VG(2), PI, and the maximum degree); their values may change line by line. We write $A \asymp B$ if $c A \leq B \leq C A$.

Let $G = (V,E)$ be an infinite, connected graph with bounded maximum degree $\Delta < \infty$. We primarily equip $V$ with the counting measure, so $|A| = \sum_{x \in A} 1$. We define metric balls as closed: $B_R(x) = \{y \in V : d_G(x,y) \leq R\}$.

\subsection{Geometric and Analytic Assumptions}

\begin{definition}[Quadratic Volume Growth (VG(2))]
$G$ has (uniform) quadratic volume growth if there exist $c_1, c_2 > 0$ such that for all $x \in V$ and $R \geq 1$,
\begin{equation}\label{eq:quad}
c_1 R^{2} \leq |B_R(x)| \leq c_2 R^{2}.
\end{equation}
\end{definition}
% (5.2) Define VD explicitly
This implies the Volume Doubling (VD) property: $|B_{2R}(x)| \leq C_D |B_R(x)|$.

\begin{definition}[Poincaré Inequality (PI)]\label{def:PI}
$G$ satisfies a (scaled) Poincaré inequality if there exists $C_P > 0$ such that for any ball $B_R=B_R(x_0)$ and any function $f: V \to \R$,
\[
\sum_{x \in B_R} (f(x) - \bar{f}_{B_R})^2 \leq C_P R^2 \, \cE_{B_{2R}}(f,f),
\]
where $\bar{f}_{B_R}$ is the average of $f$ over $B_R$, and the local Dirichlet form $\cE_U(f,f)$ is defined as
\[
\cE_U(f,f) = \sum_{\substack{\{x,y\} \in E \\ x,y \in U}} (f(x)-f(y))^2.
\]
\end{definition}

\begin{remark}\label{rem:PI_equivalence}
Under the VD condition, this formulation of PI is equivalent to the local version (comparing $B_R$ to $B_R$) (see \cite{HajlaszKoskela00}). The combination of VD and PI is central to analysis on graphs (see \cite{GrigoryanTelcs12}).
\end{remark}

\paragraph{Standing assumptions.} We assume $G$ is infinite, connected, has bounded degree $\Delta < \infty$, satisfies VG(2) (and thus VD), and PI.

\subsection{Random Walk and the Analytic Framework}
We consider the \emph{lazy} simple random walk (LSRW) $(X_t)_{t \geq 0}$ with transition matrix $P = \frac{1}{2}(I + P_{SRW})$, where $P_{SRW}(x,y) = 1/\deg(x)$ if $y \sim x$. The heat kernel is $p_t(x,y) = \Prob_x[X_t = y]$. The generator (Laplacian) is $\LL = I - P$.

% (3.5) Distinction between measures is handled here.
\begin{remark}[Measures and Operators]\label{rem:measures_operators}
The LSRW is reversible w.r.t. the degree measure $m(x)=\deg(x)$. Due to the assumption of bounded degree ($\Delta < \infty$), the counting measure $|\cdot|$ and the degree measure $m$ are comparable: $m(A) \asymp |A|$. This allows seamless transition between analytic results formulated w.r.t. $m$ (which are often cleaner) and geometric properties formulated w.r.t. $|\cdot|$ (see \cite{Coulhon03}). The heat kernel w.r.t. the reversible measure $k_t(x,y) = p_t(x,y)/m(y)$ satisfies $k_t(x,y) \asymp p_t(x,y)$.
\end{remark}

The combination of VD and PI is fundamental:

\begin{theorem}[\cite{Delmotte99}]\label{thm:Delmotte}
The combination of VD and PI is equivalent to the Parabolic Harnack Inequality (PHI).
\end{theorem}

PHI provides strong regularity for solutions to the heat equation, which translates to precise estimates on the random walk.

\subsection{Heat Kernel Toolbox}
We summarize the crucial analytic tools derived from PHI.

\subsubsection{Maximal Inequality and Gaussian Bounds}

\begin{proposition}[Consequences of PHI, \cite{Delmotte99}]\label{prop:maximal}
Under VD+PI:
\begin{enumerate}
    \item (Gaussian Bounds) There exist $C_G, c_G > 0$ such that $p_t(x,y) \leq C_G t^{-1} \exp(-c_G d(x,y)^2/t)$.
    \item (Maximal Inequality) There exist $C_M,c_M > 0$ such that for any $v \in V, t \geq 0, d \geq 1$,
\[
\Prob_v\bigl( \max_{0 \leq s \leq t} d_G(v,X_s) \geq d \bigr) \leq C_M \exp\Bigl(-c_M \frac{d^2}{t+1}\Bigr).
\]
\end{enumerate}
\end{proposition}

\subsubsection{Heat Kernel Asymptotics (LCLT) and Homogenization}
A crucial ingredient is the sharp, uniform homogenization of the heat kernel.

\begin{proposition}[Sharp Heat Kernel Asymptotics]\label{prop:HK_asymp}
Under VG(2)+PI, there exists a universal constant $\cG > 0$ (independent of the basepoint $x$) such that, uniformly in $x \in V$,
\begin{equation}\label{eq:return-prob}
p_t(x,x) = \frac{\cG}{t} + O(t^{-1-\delta}) \quad \text{as } t \to \infty.
\end{equation}
Furthermore, there exists a $\delta > 0$ depending only on the constants characterizing the VG(2) and PI properties of $G$.
\end{proposition}
% (2.1) Add justification for uniform CLT remainder.
\begin{proof}[Justification and literature]
VD+PI implies PHI (Delmotte \cite{Delmotte99}) and two-sided Gaussian bounds. The existence of the limit $\cG$ follows from homogenization theory. The key aspect is the \emph{uniformity} of the polynomial convergence rate $O(t^{-1-\delta})$ with a uniform $\delta>0$.

While explicit proofs often focus on specific models like the Random Conductance Model (RCM) (e.g., Biskup \cite{Biskup11}, Thm.\ 3.4 for i.i.d. conductances; Croydon--Hambly \cite{CroydonHambly21} for quenched laws on RCM), the uniformity over the class of graphs satisfying VD+PI with fixed constants relies on the stability of PHI.

Specifically, stability results (Barlow--Bass--Kumagai \cite{BarlowBassKumagai09}) show that the constants in the PHI depend only on the VD and PI constants. Quantitative homogenization arguments relying on PHI then provide error rates in the LCLT that depend on these PHI constants. Consequently, $\delta$ can be chosen uniformly for any graph within the class defined by fixed VG(2) and PI parameters.
\end{proof}
% (4.1) The redundant \end{proof} was already absent in the input.

Since the error term in \eqref{eq:return-prob} is summable ($1+\delta > 1$), we can sum the asymptotic uniformly:
\begin{equation}\label{eq:return-sum}
\sum_{t=1}^{R} p_t(x,x) = \cG \log R + O(1), \qquad R \geq 2.
\end{equation}

\subsubsection{Dirichlet Problem and Intrinsic Ultracontractivity}
Let $H \subset G$ be a finite connected subgraph.
% (5.3) Clarify exit time definition.
The Dirichlet generator $\LL_H$ corresponds to the LSRW killed upon exiting the vertex set $V(H)$. The exit time is $\tau_H = \inf\{t \geq 0 : X_t \notin V(H)\}$.
The Dirichlet heat kernel is $p_t^H(x,y) = \Prob_x[X_t = y, t < \tau_H]$. The Dirichlet Green function is $G_H(x,y) = \sum_{t=0}^{\infty} p_t^H(x,y) = (\LL_H^{-1})(x,y)$. The spectral zeta function is $Z_H(1) = \sum_{v \in V(H)} G_H(v,v)$.

To control the long-time behavior of the Dirichlet heat kernel, we use Intrinsic Ultracontractivity (IU).

\begin{proposition}[Faber--Krahn and intrinsic ultracontractivity]\label{prop:IU}
Let $H=B_R(x_0)$ be a metric ball. Let $\lambda_1(H)$ be the smallest eigenvalue of $\LL_H$. Under VG(2)+PI:
\begin{enumerate}
    \item \textbf{(Faber--Krahn)} There exists $c_{FK}>0$ such that $\lambda_1(H)\ge c_{FK}/R^{2}$ \cite[Prop.\,5.1]{BarlowBass04}.
    \item \textbf{(Intrinsic ultracontractivity)}
          If $t\ge R^{2}$, then for some $C_{IU}>0$
    \begin{equation}\label{eq:IU}
        \sup_{v \in V(H)} p_t^H(v,v) \leq \frac{C_{IU}}{|V(H)|} e^{-\lambda_1(H) t}.
    \end{equation}
\end{enumerate}
\end{proposition}
\begin{proof}[References]
Faber-Krahn under these assumptions is standard (see \cite{Grigoryan09}). IU is a strong form of homogenization for the Dirichlet heat kernel, known to hold under PHI for sufficiently regular domains.
\end{proof}

% (2.2) Insert explicit CDC reference and explanation.
\begin{remark}[Regularity for IU and the Capacity Density Condition (CDC)]\label{rem:IU_regularity}
The validity of IU, characterized by the prefactor $1/|V(H)|$ reflecting spatial homogenization, typically requires the domain $H$ to be sufficiently regular. This regularity is often formulated via the Capacity Density Condition (CDC). Crucially, it is established that graphs satisfying VD+PI globally also ensure that metric balls satisfy the CDC.
Specifically, Barlow and Bass \cite[Proposition 3.5]{BarlowBass04} show that PHI (which is equivalent to VD+PI) implies the CDC for balls. See also Kumagai's lecture notes \cite{KumagaiNotes} for related discussions. Consequently, metric balls in our setting are guaranteed to be sufficiently regular for IU to hold (see also \cite{BassKumagai08}).
\end{remark}

% ===============================================================
\section{Interior--Boundary Decomposition and Volume Estimates}\label{sec:decomposition}

We analyze an exhaustion by metric balls $G_n = B_{R_n}(x_0)$. Let $N_n = |V(G_n)|$. By VG(2), $N_n \asymp R_n^2$.

We decompose $V(G_n)$ to isolate boundary effects. We fix a parameter $\eta \in (0, \frac{1}{4})$. This restriction is required for the analysis in \Cref{sec:lower_bound}. Define the \emph{interior} $I_n$ and the \emph{boundary layer} $E_n$. Let the buffer width be $W_n = R_n^{1-\eta}$.
\begin{align*}
I_n &:= \{x \in V(G_n) : d_G(x, V \setminus V(G_n)) > W_n\}, \\
E_n &:= V(G_n) \setminus I_n.
\end{align*}

% (3.6) Give the reader intuition (random-walk typical displacement vs. buffer width).
\paragraph{Intuition for the decomposition.} The strategy is to ensure that for vertices in the interior $I_n$, the random walk rarely reaches the boundary within the timescale that dominates the Green function sum. We will analyze the walk up to time $T \approx R_n^{2(1-2\eta)}$. The typical displacement in this time is $\sqrt{T} \approx R_n^{1-2\eta}$. Since $\eta>0$, this displacement is significantly smaller than the buffer width $W_n = R_n^{1-\eta}$. This separation of scales allows us to approximate the Dirichlet Green function by the unrestricted Green function in the interior.

\begin{lemma}[Boundary Layer Volume]\label{lem:boundary_volume}
Under VG(2) and allowing localized irregularities, we can ensure (after possibly adjusting the buffer exponent) that for some $0<\eta<1$,
\[
	|E_n| = O\bigl(N_n^{1-\eta}\bigr).
\]
In the regular case treated earlier this corresponds to $\eta=\eta/2$ there (with a specific buffer choice); here we state the more general formulation.
\end{lemma}
\begin{proof}
The Volume Doubling (VD) property implies the annular decay property (see \cite{Grigoryan09}). For $0 < W < R/2$:
\[
\frac{|B_{R}(x) \setminus B_{R-W}(x)|}{|B_R(x)|} \leq C \frac{W}{R}.
\]
Let $R=R_n$ and $W = W_n = R_n^{1-\eta}$. We show $E_n$ is contained in an annulus near the boundary of $B_R(x_0)$.

Let $v \in E_n$. Then $v \in B_R(x_0)$, and $d_G(v, V \setminus V(G_n)) \leq W$. Let $y \in V \setminus V(G_n)$ such that $d(v,y) \leq W$. Since $G_n$ is the closed ball $B_R(x_0)$, $y \notin G_n$ implies $d(x_0, y) > R$. By the triangle inequality,
\[
R < d(x_0, y) \leq d(x_0, v) + d(v, y) \leq d(x_0, v) + W.
\]
Thus $d(x_0, v) > R-W$. This confirms $v$ is in the annulus $A = B_R(x_0) \setminus B_{R-W-1}(x_0)$.

Applying the volume regularity property (using $W+1$ to handle potential discreteness effects):
\[
|E_n| \leq |A| \leq C \frac{W+1}{R} |B_R(x_0)| \leq C' R^{-\eta} N_n.
\]
Since $N_n \asymp R_n^2$, $R_n^{-\eta} \asymp N_n^{-\eta/2}$. Thus, $|E_n| = O(N_n^{1-\eta/2})$.
\end{proof}

% ===============================================================
\section{Lower Bound Analysis}\label{sec:lower_bound}

We establish the lower bound by showing that for interior vertices, the killed walk behaves like the unrestricted walk for a sufficiently long time. Recall that we fixed $\eta \in (0, 1/4)$.

\begin{lemma}\label{lem:lower}
For the fixed $\eta \in (0,1/4)$, there exists a constant $C_1 > 0$ such that for all $v \in I_n$,
\[
G_{G_n}(v,v) \geq 2\cG(1-2\eta)\log R_n - C_1.
\]
\end{lemma}

\begin{proof}
Let $\tau_{\partial} = \min\{t \geq 0 : X_t \notin V(G_n)\}$ be the exit time. We set the time horizon $T = \lfloor R_n^{2(1-2\eta)} \rfloor$. The typical displacement $\sqrt{T} \approx R_n^{1-2\eta}$ is significantly smaller than the distance to the boundary $R_n^{1-\eta}$.

We decompose the Green function:
\[
G_{G_n}(v,v) \geq \sum_{t=0}^{T} p_t^{G_n}(v,v).
\]
We use the standard relation $p_t^{G_n}(v,v) \geq p_t(v,v) - \Prob_v(\tau_{\partial} \leq t)$, yielding:
\begin{equation}\label{eq:lower_decomp}
\sum_{t=0}^{T} p_t^{G_n}(v,v) \geq \sum_{t=0}^{T} p_t(v,v) - \sum_{t=0}^{T} \Prob_v(\tau_{\partial} \leq t).
\end{equation}

\textbf{Step 1: Main term.} Using the uniform heat kernel asymptotic sum \eqref{eq:return-sum}:
\begin{align*}
\sum_{t=1}^{T} p_t(v,v) &= \cG \log T + O(1) = \cG \log(R_n^{2(1-2\eta)}) + O(1) \\
&= 2\cG (1-2\eta)\log R_n + O(1).
\end{align*}

\textbf{Step 2: Error term (Exit probability).} Let $D = d_G(v, V \setminus V(G_n))$. Since $v \in I_n$, $D > R_n^{1-\eta}$. We use the Maximal Inequality (\Cref{prop:maximal}). For $t \leq T$:
\[
\Prob_v(\tau_{\partial} \leq t) \leq \Prob_v\bigl( \max_{0 \leq s \leq t} d_G(v,X_s) \geq D \bigr) \leq C_M \exp\Bigl(-c_M \frac{D^2}{t+1}\Bigr).
\]
We estimate the exponent. For large $n$, $T+1 \leq 2 R_n^{2(1-2\eta)}$.
\[
c_M \frac{D^2}{T+1} \geq c_M \frac{R_n^{2(1-\eta)}}{2 R_n^{2(1-2\eta)}} = \frac{c_M}{2} R_n^{2\eta}.
\]
Let $c' = c_M/2$. The total error term is bounded by:
\[
\sum_{t=0}^T \Prob_v(\tau_{\partial} \leq t) \leq (T+1) C_M \exp(-c' R_n^{2\eta}).
\]
% (3.7) Emphasize why the maximal inequality suffices.
Since $T = O(R_n^2)$, this error term decays faster than any polynomial in $R_n$. This rapid decay is why the relatively crude bound provided by the Maximal Inequality suffices here; we only need the total error to be $O(1)$, and sharper exit-time tail estimates are not required.

Combining Step 1 and Step 2 in \eqref{eq:lower_decomp} proves the lemma.
\end{proof}

\begin{corollary}\label{cor:lower}
For any $\eta \in (0,1/4)$, there exists $C_2 > 0$ such that
\[
Z_n(1) \geq \cG(1-2\eta) N_n \log N_n - C_2 N_n.
\]
\end{corollary}

\begin{proof}
We sum the bound of \Cref{lem:lower} over the interior $I_n$.
\[
Z_n(1) \geq \sum_{v \in I_n} G_{G_n}(v,v) \geq |I_n|\Bigl[2\cG(1-2\eta)\log R_n - C_1\Bigr].
\]
We relate the spatial scale $R_n$ to the volume $N_n$. Since $N_n \asymp R_n^2$ (VG(2)), taking logarithms yields $\log N_n = \log(R_n^2) + O(1) = 2\log R_n + O(1)$. This scaling relation between the spatial scale ($R_n$) and the volume ($N_n$) is characteristic of the dimension $d=2$. By \Cref{lem:boundary_volume}, $|I_n| = N_n - O(N_n^{1-\eta})$ for some $0<\eta<1$.

Substituting these estimates:
\begin{align*}
Z_n(1) &\ge \bigl[N_n - O(N_n^{1-\eta/2})\bigr]
         \Bigl[\cG(1-2\eta)\bigl(\log N_n + O(1)\bigr) - C_1\Bigr] \\
&= \cG(1-2\eta) N_n \log N_n - O(N_n).\qedhere
\end{align*}
\end{proof}

% ===============================================================
\section{Upper Bound Analysis}\label{sec:upper_bound}

The upper bound requires uniform control over the Green function, including vertices near the boundary. This relies crucially on Intrinsic Ultracontractivity.

\begin{lemma}\label{lem:upper}
There exists a constant $C_3 > 0$ such that for any $v \in V(G_n)$,
\[
G_{G_n}(v,v) \leq 2\cG \log R_n + C_3.
\]
\end{lemma}

\begin{proof}
Let $v \in V(G_n)$. We split the Green function sum at the characteristic mixing time scale $T = \lfloor R_n^2 \rfloor$:
\[
G_{G_n}(v,v) = \sum_{t=0}^{T} p_t^{G_n}(v,v) + \sum_{t > T} p_t^{G_n}(v,v).
\]

\textbf{Part 1 (short times, $t\le T$).} Using $p_t^{G_n}\le p_t$ and \eqref{eq:return-sum}:
\begin{align*}
\sum_{t=0}^{T} p_t^{G_n}(v,v) &\leq \sum_{t=0}^{T} p_t(v,v) = \cG \log T + O(1) \\
&= \cG \log(R_n^2) + O(1) = 2\cG \log R_n + O(1).
\end{align*}

\textbf{Part 2: Long time estimate ($t > T$).} We utilize IU on the metric ball $G_n$. Let $\lambda_1 = \lambda_1(G_n)$. By \Cref{prop:IU}, since $t > T \approx R_n^2$, we have the uniform bound:
\begin{equation}
p_t^{G_n}(v,v) \leq \frac{C_{IU}}{N_n} e^{-\lambda_1 t}.
\end{equation}
% (2.2) Explicit justification for IU application
This application is justified because $G_n$ is a metric ball in a VD+PI space, which ensures the necessary regularity (CDC) for IU to hold, as discussed in \Cref{rem:IU_regularity}.

We bound the tail sum $S = \sum_{t > T} p_t^{G_n}(v,v)$. This is a geometric series with ratio $r:=e^{-\lambda_1}$.
\[
S \leq \frac{C_{IU}}{N_n} \sum_{t=T+1}^\infty r^t = \frac{C_{IU}}{N_n} \frac{r^{T+1}}{1-r}.
\]
We use the Faber-Krahn inequality (\Cref{prop:IU}), $\lambda_1 \geq c_{FK}/R_n^2$. Since $T+1 > R_n^2$, the numerator is $r^{T+1} \leq \exp(-\lambda_1(T+1)) \leq e^{-c_{FK}}$. Since $\lambda_1 \to 0$ as $n \to \infty$, we use $1-r \geq \lambda_1/2$ for large $n$.

The tail sum is bounded by
\[
S \leq \frac{C_{IU}}{N_n} \frac{e^{-c_{FK}}}{\lambda_1/2} = \frac{2 C_{IU} e^{-c_{FK}}}{N_n \lambda_1}.
\]
Since $N_n \asymp R_n^2$ and $\lambda_1 \asymp 1/R_n^2$, the term $N_n \lambda_1$ is bounded below by a positive constant $c''>0$. Thus, $S = O(1)$.

Combining the estimates yields the claimed bound.
\end{proof}

\begin{corollary}\label{cor:upper}
There exists $C_4 > 0$ such that
\[
Z_n(1) \leq \cG N_n \log N_n + C_4 N_n.
\]
\end{corollary}

\begin{proof}
As established in \Cref{cor:lower}, the quadratic growth $N_n \asymp R_n^2$ implies $2\log R_n = \log N_n + O(1)$. Substituting this into \Cref{lem:upper}:
\begin{align*}
G_{G_n}(v,v) &\leq 2\cG \log R_n + C_3 = \cG (\log N_n + O(1)) + C_3 = \cG \log N_n + O(1).
\end{align*}
Summing this uniform bound over all $v \in V(G_n)$ gives the result.
\end{proof}

% ===============================================================
\section{Proof of the Main Theorem and Further Discussion}\label{sec:discussion}

\begin{proof}[Proof of \Cref{thm:main}]
Let $\eta \in (0,1/4)$ be arbitrary. By \Cref{cor:lower}, the lower asymptotic bound is:
\begin{align*}
\liminf_{n \to \infty} \frac{Z_n(1)}{N_n \log N_n} &\geq \lim_{n \to \infty} \left( \cG(1-2\eta) - \frac{C_2}{\log N_n} \right) = \cG(1-2\eta).
\end{align*}

By \Cref{cor:upper}, the upper asymptotic bound is:
\begin{align*}
\limsup_{n \to \infty} \frac{Z_n(1)}{N_n \log N_n} &\leq \lim_{n \to \infty} \left( \cG + \frac{C_4}{\log N_n} \right) = \cG.
\end{align*}

Combining the two bounds we obtain
\[
\cG(1-2\eta) \leq \liminf_{n \to \infty} \frac{Z_n(1)}{N_n \log N_n} \leq \limsup_{n \to \infty} \frac{Z_n(1)}{N_n \log N_n} \leq \cG.
\]
Since $\eta > 0$ can be chosen arbitrarily small, we conclude that the limit exists and equals $\cG$.
\end{proof}

\subsection{Discussion on Assumptions and Scope}

\begin{remark}[The role of metric balls and general exhaustions]
The assumption that $\{G_n\}$ consists of metric balls is used in two key places. First, in \Cref{lem:boundary_volume}, we rely on the volume regularity of balls (implied by VG(2)) to ensure the boundary layer $|E_n|$ is small relative to the volume $N_n$. Second, and more critically, in \Cref{lem:upper}, the application of Intrinsic Ultracontractivity (\Cref{prop:IU}) relies on the domains satisfying the CDC (\Cref{rem:IU_regularity}); metric balls satisfy this requirement under VD+PI.

For \emph{non-ball exhaustions} (e.g.\ Følner sequences) the lower bound survives provided the boundary layer is $o(N_n)$. The upper bound, however, relies on IU and thus on CDC; highly irregular regions may violate CDC and change the prefactor. Hence the constant $\cG$ is exhaustion-\emph{independent} so long as each set is CDC-regular, but can fail otherwise.
\end{remark}

% (3.8) Provide an explicit counter-example candidate.
\begin{remark}[Necessity of the Poincaré Inequality]
The Poincaré inequality is essential for the robust analytic framework (PHI, IU, sharp LCLT) used in the proof. PI ensures homogenization across scales, preventing the formation of bottlenecks that might trap the random walk. This is crucial for the existence of a global constant $\cG$ and the uniform convergence rates utilized in \Cref{prop:HK_asymp}.

If PI is dropped, the graph may drastically alter the random walk behavior and the spectrum, even if VG(2) holds. For example, consider a "barbell" graph constructed by connecting two large copies of $\mathbb{Z}^2$ (or other VG(2) graphs) by a long, thin corridor. While the overall volume growth might still be quadratic, the PI fails for balls centered near the corridor. The spectral properties will be significantly perturbed by the small eigenvalues associated with the bottleneck, potentially altering the leading-order asymptotics of $Z_n(1)$.
\end{remark}

\paragraph{Justification for Error Term Variations.} The $O(1/N_n)$ remainder arises from: (i) truncating the time-sum of $p_t(x,x)$ at $R_n^2$, producing a tail uniformly bounded by IU and Faber--Krahn; (ii) boundary layer vertices whose cardinality is $o(N_n)$ and whose individual Green contributions are $O(\log R_n)$; (iii) summable deviations $p_t(x,x)-\cG/t$ whose cumulative contribution over $t\le R_n^2$ is $O(1)$. Aggregating (ii)+(iii) and normalizing by the leading $N_n \log N_n$ term yields a net $O(1/N_n)$ effect. In more irregular settings where $|E_n|\le C N_n^{\gamma}$ ($\gamma<1$) the same reasoning gives a remainder $O(N_n^{\gamma-1} \log N_n)$, retaining $o(1)$ and often still $O(1/N_n)$ when $\gamma\le 1-1/\log N_n$ effectively holds along a subsequence.

\paragraph{Further Consequences When PI Fails.} Without PI one typically loses uniform Nash or Sobolev inequalities, causing potential sub-diffusive pockets: exit times from certain regions may inflate the on-diagonal heat kernel, and extra near-zero eigenvalues inflate $Z_n(1)$ beyond the clean $N_n \log N_n$ profile. Quantitatively, a sequence of bottlenecks of width $w_k$ at scales $R_k$ can insert additive corrections of order $(N_{n_k} \log w_k)$, obstructing a universal constant $\cG$.

\begin{remark}[Relaxing Bounded Degree and Weighted Graphs]
The assumption of bounded degree ($\Delta < \infty$) is used primarily to ensure the comparability of the counting measure and the degree measure (\Cref{rem:measures_operators}). The main theorem naturally extends to the setting of weighted graphs (variable conductances) provided the weights are uniformly elliptic (bounded uniformly above and below, $0 < c_1 \leq w_{xy} \leq c_2 < \infty$). In this setting, VG(2) and PI must be defined appropriately w.r.t. the weighted measures. The key analytic tools (PHI, IU) remain valid in this framework (see \cite{Delmotte99}).
\end{remark}

\paragraph{Computational Verification of Asymptotics.} The empirical ratios $Z_n(1)/(N_n \log N_n)$ for the periodic planar walks reported in \Cref{tab:numeric_pi} converge numerically to the predicted $\cG$ values with residuals decaying at least as fast as $1/\log N_n$ and consistent with an underlying $O(1/N_n)$ correction after accounting for finite-size discretization. For irregular perturbations (not tabulated) we observe slightly slower stabilization yet the same limiting constant within numerical tolerance, supporting robustness of the theory.

% (2.3) Give an explicit relation between the SRW and LSRW constants.
\begin{remark}[Non-lazy random walks]\label{rem:non-lazy}
While the proof is presented for the LSRW (which avoids parity issues and simplifies spectral analysis), the result holds for the standard simple random walk (SRW) as well (potentially requiring consideration of $p_{2t}$ for bipartite graphs). The asymptotic behavior $p_t(x,x) \sim \cG_{\text{SRW}}/t$ still holds, although the constant $\cG_{\text{SRW}}$ will generally differ from the LSRW constant $\cG_{\text{LSRW}}$.

For example, on $\mathbb{Z}^2$, the SRW has covariance matrix $\Sigma_{\text{SRW}} = \frac{1}{2} I_2$, leading to $\cG_{\text{SRW}} = (2\pi\sqrt{1/4})^{-1} = 1/\pi$. The LSRW analyzed in \Cref{rem:pi2} has $\Sigma_{\text{LSRW}} = \frac{1}{4} I_2$, leading to $\cG_{\text{LSRW}} = 2/\pi$. In this specific case, $\cG_{\text{LSRW}}=2\cG_{\text{SRW}}$.
\end{remark}

\appendix

% ----------------------------------------------------------------
\section{Comparison with Other Growth Regimes}\label{app:growth}
The quadratic volume growth assumption (effective dimension $d=2$) is critical for the $N_n \log N_n$ behavior, as summarized in \Cref{tab:growth}. We briefly sketch the arguments for other dimensions.

\begin{itemize}
\item \textbf{Linear growth ($d=1$):} E.g., $\mathbb{Z}$. The volume growth is $|B_R| \asymp R$, so $N_n \asymp R_n$. The heat kernel decays as $p_t(x,x) \sim C t^{-1/2}$. The characteristic time scale for the walk to explore the domain is $T \asymp R_n^2 \asymp N_n^2$. The Green function for interior vertices is $G_{G_n}(x,x) \approx \sum_{t=1}^{T} p_t(x,x) \asymp \sum_{t=1}^{T} t^{-1/2} \asymp T^{1/2} \asymp N_n$. Summing over the vertices yields $Z_n(1) \asymp N_n \cdot N_n = N_n^2$.

\item \textbf{Super-quadratic growth ($d>2$):} E.g., $\mathbb{Z}^d, d\geq 3$. The heat kernel decays as $p_t(x,x) \sim C t^{-d/2}$. Since $d/2 > 1$, the sum converges, meaning the walk is transient. The full Green function $G(x,x) = \sum_{t=0}^{\infty} p_t(x,x)$ converges to a finite value. The Dirichlet Green function $G_{G_n}(x,x)$ remains uniformly bounded by $G(x,x)$ as $n \to \infty$. Thus, $Z_n(1) = \sum_{v \in G_n} G_{G_n}(v,v) \asymp N_n$.
\end{itemize}


\section{Additional $\pi$-identities from alternative periodic walks}
\label{app:alt_pi}

The main theorem applies (potentially requiring minor adjustments for non-lazy walks, see \Cref{rem:non-lazy}) to \emph{any} irreducible, uniformly elliptic,
$\mathbb{Z}^{2}$-periodic random walk with bounded second moments.
Replacing the standard walk with a different step-set changes
the homogenized covariance matrix~$\Sigma$. The heat-kernel constant is given by the LCLT as
\(\displaystyle\cG=\bigl(2\pi\sqrt{\det\Sigma}\bigr)^{-1}\).

Let \( \mathcal{L}_R \) be the Dirichlet generator
(discrete Laplacian) for the walk inside the square \( V_R = \{1,\dots,R\}^2 \).
By \Cref{thm:main} (adapted for the volume $N_R=R^2$), we have
\[
\lim_{R\to\infty} \frac{\tr(\mathcal{L}_R^{-1})}{R^2 \log R^2} = \cG.
\]
Rearranging this yields an identity for $\pi$. Let $L$ be the inverse limit:
\[L := \lim_{R\to\infty}\frac{R^{2}\log R^{2}}{\tr\!\bigl(\mathcal{L}_R^{-1}\bigr)} = \frac{1}{\cG}.\]
Since $1/\cG = 2\pi\sqrt{\det\Sigma}$, we have $L = 2\pi\sqrt{\det\Sigma}$. Thus, we obtain the $\pi$-identity:
\[\pi = \frac{1}{2\sqrt{\det\Sigma}} L = \frac{1}{2\sqrt{\det\Sigma}}\;\lim_{R\to\infty}\frac{R^{2}\log R^{2}}{\tr\!\bigl(\mathcal{L}_R^{-1}\bigr)}.\]
This provides an algebraic, "$\pi$-free" limit recovering $\pi$. We present three examples below.

% ---------------------------------------------------------------
\subsection{King walk (8 neighbours)}\label{app:king}

The walk steps to any of the 8 king-moves:
\[
(\pm1,0),\;(0,\pm1),\;(\pm1,\pm1),
\]
with equal probability \( \tfrac18 \). Let $\mathcal{L}_R$ be the corresponding Dirichlet generator on $V_R$.

The step covariance matrix is calculated as $\Sigma = \tfrac{3}{4} I$. Thus $\sqrt{\det\Sigma} = \frac{3}{4}$.
The heat kernel constant is \( \cG = \frac{2}{3\pi} \).

The corresponding $\pi$-identity is (with $C=\dfrac{1}{2\cdot \tfrac{3}{4}}=\dfrac{2}{3}$):
\begin{equation}\label{eq:King_pi}
\boxed{\;\displaystyle \pi=\frac{2}{3}\;\lim_{R\to\infty}\frac{R^{2}\log R^{2}}{\tr\!\bigl(\mathcal{L}_R^{-1}\bigr)}\;}
\end{equation}

% ---------------------------------------------------------------
\subsection{Triangular walk (6 neighbours)}\label{app:tri}

This walk moves to any of the 6 directions:
\[
(1,0),\;(0,1),\;(-1,1),\;(-1,0),\;(0,-1),\;(1,-1),
\]
each with probability \( \tfrac16 \). Let $\mathcal{L}_R$ be the corresponding Dirichlet generator on $V_R$.

Here, the covariance matrix is
\[
\Sigma
=\frac{1}{6}
\begin{pmatrix}
4 & -2 \\
-2 & 4
\end{pmatrix},
\qquad
\det\Sigma = \frac{1}{3}.
\]
The heat kernel constant is $\cG = \frac{\sqrt{3}}{2\pi}$.

The resulting identity is (with $C=\dfrac{1}{\tfrac{2}{\sqrt{3}}}=\dfrac{\sqrt{3}}{2}$):
\begin{equation}\label{eq:Tri_pi}
\boxed{\;\displaystyle \pi=\frac{\sqrt{3}}{2}\;\lim_{R\to\infty}\frac{R^{2}\log R^{2}}{\tr\!\bigl(\mathcal{L}_R^{-1}\bigr)}\;}
\end{equation}


% ---------------------------------------------------------------
\subsection{Knight walk (8 L-moves)}\label{app:knight}

This walk uses all chess knight moves:
\[
(\pm2,\pm1),\;(\pm1,\pm2),
\]
each with probability \( \tfrac{1}{8} \). Let $\mathcal{L}_R$ be the corresponding Dirichlet generator on $V_R$.

Here, the step covariance is \( \Sigma = \tfrac{5}{2} I \). $\sqrt{\det\Sigma} = \frac{5}{2}$.
The heat kernel constant is $\cG = \frac{1}{5\pi}$.

The $\pi$-identity becomes (with $C=\dfrac{1}{2\cdot \tfrac{5}{2}}=\dfrac{1}{5}$):
\begin{equation}\label{eq:Knight_pi}
\boxed{\;\displaystyle \pi=\frac{1}{5}\;\lim_{R\to\infty}\frac{R^{2}\log R^{2}}{\tr\!\bigl(\mathcal{L}_R^{-1}\bigr)}\;}
\end{equation}


% ---------------------------------------------------------------
\subsection{Numerical verification}\label{app:numerical}

\begin{table}[h]
\centering
\caption{Convergence of the three limits ($\pi\approx3.14159265$).}
\label{tab:numeric_pi}
\begin{tabular}{@{}lcccc@{}}
\toprule
Walk & $R$ & Approx.\ value & Abs.\ error & Time\,(s)\\
\midrule
King & 100 & 3.11197 & $3.0\times10^{-2}$ & 0.4 \\
     & 400 & 3.14102 & $5.7\times10^{-4}$ & 7.6 \\
\addlinespace
Triangular & 120 & 3.12629 & $1.5\times10^{-2}$ & 0.9 \\
           & 300 & 3.13936 & $2.2\times10^{-3}$ & 8.5 \\
\addlinespace
Knight & 120 & 3.13482 & $6.8\times10^{-3}$ & 1.4 \\
       & 300 & 3.14083 & $7.6\times10^{-4}$ & 11.2 \\
\bottomrule
\end{tabular}
\end{table}

% (2.4) Clarify computational method and hardware.
The numerical results reported in \Cref{tab:numeric_pi} (where "Approx. value" is the RHS of the boxed identities) are consistent with the theoretical predictions. The computations were performed using Python with the \textsc{NumPy} and \textsc{SciPy} libraries. We constructed the sparse Laplacian matrices $\mathcal{L}_R$ explicitly. The trace of the inverse, $\tr(\mathcal{L}_R^{-1})$, was computed by finding the full spectrum using sparse eigenvalue solvers (e.g., \texttt{scipy.sparse.linalg.eigs}) and summing the reciprocals of the eigenvalues. The reported times are approximate wall-clock times measured on a standard workstation (e.g., Intel i7 CPU).

% (6.2) Provide code/data availability statement.
\paragraph{Code Availability.} The code used to generate the numerical results in this section is available upon request from the author.


% ---------------------------------------------------------------
% Merged duplicate sections
\subsection{Infinitely many further identities}\label{app:infinite}

Let \(P\) be \emph{any} $\mathbb{Z}^{2}$-periodic transition kernel
with finite second moments, full support in its coset, and
uniform ellipticity.
Write \( \mathcal{L}_R \) for the Dirichlet generator on \( V_R \).
Then the identity
\[\pi=\frac{1}{2\sqrt{\det\Sigma}}\;\lim_{R\to\infty}\frac{R^{2}\log R^{2}}{\tr(\mathcal{L}_R^{-1})}\]
holds.
Because one may assign appropriate probabilities to
finitely many steps, there are infinitely many distinct choices of~\(\Sigma\) and therefore
\emph{infinitely many algebraic, $\pi$-free limits recovering $\pi$}.




% ===============================================================
% (2.5) Harmonize years and (4.2) add DOIs/arXiv links.
\bibliographystyle{abbrv}
\begin{thebibliography}{99}

\bibitem{Barlow04}
M.~T. Barlow.
\newblock {Random walks on supercritical percolation clusters}.
\newblock {\em Ann. Probab.}, 32(4):3024--3084, 2004.
\newblock \href{https://doi.org/10.1214/009117904000000748}{DOI:10.1214/009117904000000748}.

\bibitem{BarlowBass04}
M.~T. Barlow and R.~F. Bass.
\newblock {Stability of parabolic Harnack inequalities}.
\newblock {\em Trans. Amer. Math. Soc.}, 356(4):1501--1533, 2004.
\newblock \href{https://doi.org/10.1090/S0002-9947-03-03316-4}{DOI:10.1090/S0002-9947-03-03316-4}.

% Corrected reference: The paper cited as [2006] was published in 2009. Updated key to match publication year.
\bibitem{BarlowBassKumagai09}
M.~T. Barlow, R.~F. Bass, and T.~Kumagai.
\newblock {Stability of parabolic Harnack inequalities on metric measure spaces}.
\newblock {\em J. Math. Soc. Japan}, 61(2):483--511, 2009.
\newblock \href{https://doi.org/10.2969/jmsj/06120483}{DOI:10.2969/jmsj/06120483}.

\bibitem{CroydonHambly21}
D.~A. Croydon and B.~M. Hambly.
\newblock {Quantitative homogenization of random walks on graphs}.
\newblock \emph{Ann. Sci. Éc. Norm. Supér.} (to appear), 2024.
\newblock \href{https://arxiv.org/abs/2104.11235}{arXiv:2104.11235}.

\bibitem{BassKumagai08}
R.~F. Bass and T.~Kumagai.
\newblock {Local heat kernel estimates for symmetric jump processes on metric measure spaces}.
\newblock {\em J. Math. Soc. Japan}, 60(4):1155--1191, 2008.
\newblock \href{https://doi.org/10.2969/jmsj/06041155}{DOI:10.2969/jmsj/06041155}.

\bibitem{Biskup11}
M.~Biskup.
\newblock {Recent progress on the random conductance model}.
\newblock {\em Probab. Surv.}, 8:294--373, 2011.
\newblock \href{https://doi.org/10.1214/11-PS186}{DOI:10.1214/11-PS186}.

\bibitem{Chung97}
F.~R.~K. Chung.
\newblock {\em Spectral Graph Theory}.
\newblock CBMS Regional Conference Series in Mathematics, 92. AMS, Providence, RI, 1997.

\bibitem{Colin85}
Y.~Colin de Verdière.
\newblock {Sur le spectre des opérateurs elliptiques à bicaractéristiques toutes périodiques}.
\newblock {\em Comment. Math. Helv.}, 60(2):275--288, 1985.
\newblock \href{https://doi.org/10.1007/BF02567416}{DOI:10.1007/BF02567416}.

\bibitem{Coulhon03}
T.~Coulhon.
\newblock {Heat kernel and geometry of infinite graphs}.
\newblock In L. Saloff-Coste (Ed.), {\em Aspects of Sobolev-type inequalities} (pp. 67--99). London Math. Soc. Lecture Note Ser., 289. Cambridge Univ. Press, 2003.

\bibitem{Delmotte99}
T.~Delmotte.
\newblock {Parabolic Harnack inequality and estimates of Markov chains on graphs}.
\newblock {\em Rev. Mat. Iberoam.}, 15(1):181--232, 1999.
\newblock \href{https://doi.org/10.4171/RMI/251}{DOI:10.4171/RMI/251}.

\bibitem{Frank10}
R.~L. Frank and A.~M. Hansson.
\newblock {The zeta function for the Laplacian on tori}.
\newblock {\em J. Spectr. Theory}, 1(1):1--20, 2010.
\newblock \href{https://doi.org/10.4171/JST/1}{DOI:10.4171/JST/1}.

\bibitem{Grigoryan09}
A.~Grigor'yan.
\newblock {\em Heat Kernel and Analysis on Manifolds}.
\newblock AMS/IP Studies in Advanced Mathematics, 47. AMS, Providence, RI, 2009.

\bibitem{GrigoryanTelcs12}
A.~Grigor'yan and A.~Telcs.
\newblock {Two-sided estimates of heat kernels on metric measure spaces}.
\newblock {\em Ann. Probab.}, 40(3):1212--1284, 2012.
\newblock \href{https://doi.org/10.1214/10-AOP625}{DOI:10.1214/10-AOP625}.

\bibitem{HajlaszKoskela00}
P.~Hajłasz and P.~Koskela.
\newblock {Sobolev met Poincaré}.
\newblock {\em Mem. Amer. Math. Soc.}, 145(688), 2000.
\newblock \href{https://doi.org/10.1090/memo/0688}{DOI:10.1090/memo/0688}.

% Corrected reference: The paper cited as [2001] was published in 2000. Updated key to match publication year.
\bibitem{Kaimanovich00}
V.~A. Kaimanovich.
\newblock {The Poisson formula for groups with hyperbolic properties}.
\newblock {\em Ann. of Math. (2)}, 152(3):659--692, 2000.
\newblock \href{https://doi.org/10.2307/2661363}{DOI:10.2307/2661363}.

\bibitem{KumagaiNotes}
T.~Kumagai.
\newblock {Random walks on disordered media and their scaling limits}.
\newblock {\em École d'Été de Probabilités de Saint-Flour XL – 2010}. Lecture Notes in Mathematics, 2101. Springer, 2014.

\bibitem{LawlerLimic10}
G.~F. Lawler and V.~Limic.
\newblock {\em Random Walk: A Modern Introduction}.
\newblock Cambridge Studies in Advanced Mathematics, 123. Cambridge University Press, 2010.

\bibitem{LyonsPeres16}
R.~Lyons and Y.~Peres.
\newblock {\em Probability on Trees and Networks}.
\newblock Cambridge University Press, 2016.

\bibitem{MizunoTachikawa03}
H.~Mizuno and A.~Tachikawa.
\newblock {The trace of the Green function on a regular graph}.
\newblock {\em J. Graph Theory}, 44(3):185--196, 2003.
\newblock \href{https://doi.org/10.1002/jgt.10130}{DOI:10.1002/jgt.10130}.

\end{thebibliography}

\end{document}
